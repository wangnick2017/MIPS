# MIPS Simulator

一个假装模拟 MIPS 的模拟器（2018.7.3-2018.7.11）。

## 一些细节

* text和data都存在了内存里，五级流水时在IF阶段处理了Structure Hazard。
* 对于Data Hazard，不想写转发的我直接停顿了事。
* 对于Control Hazard，采用了4位历史的局部分支预测，对大量测试数据进行了统计后得到的预测成功率为96.986%。
* 鉴于测试数据的不规范，MIPS指令采用了64位编码以存储所有的指令信息。吸取了一些失败的教训后，编码/解码的过程都由unsigned整数来处理。
* 由于时（ben）间（ren）仓（lan）促（duo），未能实现并发的五级流水，但至少还是了解了一些多线程的基础知识的。

## 文件结构

* MIPS/MIPS，最初的暴力算法版本，指令都存在了vector里。
* MIPS/MIPS_Pipeline，五级流水初版。text在内存里。对于Control Hazard，直接停止流水。
* MIPS/MIPS_Prediction，加入了分支预测，简单地调整了一些细节。

## 总结

从一开始的完全没搞清状况，到不得不入手《计算机体系结构》那本书硬着头皮看，再到最后终于对五级流水有一个系统的了解并调完了这个丑陋的模拟器，自己的收获还是蛮多的。不过讲真的一天10多个小时对着visual studio调那几个隐秘的bug的经历真令人难忘。

2018.7.13